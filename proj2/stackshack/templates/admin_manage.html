{% extends "base.html" %}
{% block title %}Manage Users{% endblock %}
{% block content %}
<h2>Manage Users</h2>
<table border="1" width="70%">
  <tr><th>ID</th><th>Username</th><th>Role</th><th>Actions</th></tr>
  {% for user in users %}
  <tr>
    <td>{{ user.id }}</td>
    <td>{{ user.username }}</td>
    <td>{{ user.role }}</td>
    <td>
      {% if user.username != current_user.username %}
      <form method="POST" style="display:inline;">
        <input type="hidden" name="user_id" value="{{ user.id }}">
        <select name="role">
          <option value="customer">Customer</option>
          <option value="staff">Staff</option>
          <option value="admin">Admin</option>
        </select>
        <button name="update_role">Update Role</button>
      </form>
      <form method="POST" style="display:inline;">
        <input type="hidden" name="user_id" value="{{ user.id }}">
        <button name="delete_user" style="background:red; color:white;">Delete</button>
      </form>
      {% else %}
        (You)
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}